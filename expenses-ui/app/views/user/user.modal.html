<div class="inmodal">
  <form role="form" name="userForm" novalidate ng-submit="vm.save()">
    <div class="modal-header">
      <h4 class="modal-title">{{vm.action}} Usuario</h4>
    </div>
    <div class="modal-body">
      <div class="form-group" ng-class="userForm.$dirty && userForm.name.$invalid ? 'has-error' : ''">
        <label>Nombre</label>
        <input type="text" class="form-control" name="name" ng-model="vm.user.name" ng-minlength="4" maxlength="50"
               required>
        <div class="m-t-xs" ng-show="userForm.$dirty && userForm.name.$invalid">
          <small class="text-danger" ng-show="userForm.name.$error.required">Ingrese el nombre del usuario.</small>
          <small class="text-danger" ng-show="userForm.name.$error.minlength">El nombre debe contener al menos 4
            carácteres.
          </small>
        </div>
      </div>

      <div class="form-group" ng-class="userForm.$dirty && userForm.user.$invalid ? 'has-error' : ''">
        <label>Correo Electrónico</label>
        <input type="email" class="form-control" name="user" placeholder="E-mail" ng-model="vm.user.user"
               ng-minlength="5" maxlength="100" required ng-readonly="vm.user.update">
        <div class="m-t-xs" ng-show="userForm.$dirty && userForm.user.$invalid">
          <small class="text-danger" ng-show="userForm.user.$error.required">Ingrese un correo electrónico.</small>
          <small class="text-danger" ng-show="userForm.user.$error.email">Correo electrónico inválido.</small>
          <small class="text-danger" ng-show="userForm.user.$error.duplicated">Correo electrónico ya existente.</small>
        </div>
      </div>
      <!--<div class="form-group" ng-class="userForm.$dirty && userForm.password.$invalid ? 'has-error' : ''">-->
        <!--<label>Contraseña</label>-->
        <!--<input type="password" placeholder="********" class="form-control" name="password" ng-model="vm.user.password"-->
               <!--ng-minlength="4" maxlength="100" required>-->
        <!--<div class="m-t-xs" ng-show="userForm.$dirty && userForm.password.$invalid">-->
          <!--<small class="text-danger" ng-show="userForm.password.$error.required">Ingrese una contraseña</small>-->
          <!--<small class="text-danger" ng-show="userForm.password.$error.minlength">La contraseña debe contener al menos 4-->
            <!--carácteres.-->
          <!--</small>-->
        <!--</div>-->
      <!--</div>-->
      <!--<div class="form-group" ng-class="userForm.$dirty && userForm.repeatPassword.$invalid ? 'has-error' : ''">-->
        <!--<label>Repetir Contraseña</label>-->
        <!--<input type="password" placeholder="********" class="form-control" name="repeatPassword"-->
               <!--ng-model="vm.user.repeatPassword" ng-minlength="4" maxlength="100" required>-->
        <!--<div class="m-t-xs" ng-show="userForm.$dirty && userForm.repeatPassword.$invalid">-->
          <!--<small class="text-danger" ng-show="userForm.repeatPassword.$error.required">Ingrese una contraseña.</small>-->
          <!--<small class="text-danger" ng-show="userForm.repeatPassword.$error.minlength">La contraseña debe contener al-->
            <!--menos 4 carácteres.-->
          <!--</small>-->
          <!--<small class="text-danger" ng-show="userForm.repeatPassword.$error.notEqual">Las contraseña deben coincidir.-->
          <!--</small>-->
        <!--</div>-->
      <!--</div>-->

      <div class="form-group" ng-class="userForm.$dirty && userForm.role.$invalid ? 'has-error' : ''">
        <label for="role">Rol </label>

        <select id="role" class="form-control" name="role" data-ng-options="role.name for role in vm.userRoles"
                data-ng-model="vm.user.role" required>
          <option value="">Seleccione un rol</option>
        </select>

        <div class="m-t-xs" ng-show="userForm.$dirty && userForm.role.$invalid">
          <small class="text-danger" ng-show="userForm.role.$error.required">Seleccione un rol.</small>
        </div>
      </div>
    </div>
    <div class="modal-footer">
      <button type="button" class="btn btn-white" ng-click="vm.cancel()">Cancelar</button>
      <button class="btn btn-sm btn-primary" type="submit" ng-disabled="vm.enableSaveBtn"><strong>Guardar</strong>
      </button>
    </div>
  </form>
</div>

<div class="busy" ng-show="vm.loading">
  <div class="spiner-example">
    <div class="sk-spinner sk-spinner-wave">
      Cargando...
      <div class="sk-rect1"></div>
      <div class="sk-rect2"></div>
      <div class="sk-rect3"></div>
      <div class="sk-rect4"></div>
      <div class="sk-rect5"></div>
    </div>
  </div>
</div>